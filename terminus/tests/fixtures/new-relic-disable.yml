
-
    request:
        method: POST
        url: 'https://onebox/api/authorize/machine-token'
        headers:
            Host: 'onebox'
            Expect: null
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/2.3.1-dev (php_version=7.3.13&script=bin/terminus)'
            Accept: null
        body: '{"machine_token":"111111111111111111111111111111111111111111111","client":"terminus"}'
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Date: 'Tue, 28 Jan 2020 22:47:22 GMT'
            Content-Type: 'application/json; charset=utf-8'
            Content-Length: '182'
            Connection: keep-alive
            X-Pantheon-Trace-Id: 25344270-4220-11ea-a46f-1ffa60855b30
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
            Strict-Transport-Security: max-age=31536000
        body: '{"session":"11111111-1111-1111-1111-111111111111:258cfc44-4220-11ea-8505-42010a800058:vcTqM66ulQGihuEOSbaQ0","expires_at":1582670842,"user_id":"11111111-1111-1111-1111-111111111111"}'
-
    request:
        method: GET
        url: 'https://onebox/api/site-names/behat-tests'
        headers:
            Host: 'onebox'
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/2.3.1-dev (php_version=7.3.13&script=bin/terminus)'
            Authorization: 'Bearer 11111111-1111-1111-1111-111111111111:258cfc44-4220-11ea-8505-42010a800058:vcTqM66ulQGihuEOSbaQ0'
            Accept: null
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Date: 'Tue, 28 Jan 2020 22:47:23 GMT'
            Content-Type: 'application/json; charset=utf-8'
            Transfer-Encoding: chunked
            Connection: keep-alive
            X-Pantheon-Trace-Id: 261134f0-4220-11ea-9590-c52a0942a295
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
            Strict-Transport-Security: max-age=31536000
        body: '{"id": "11111111-1111-1111-1111-111111111111", "name": "behat-tests"}'
-
    request:
        method: GET
        url: 'https://onebox/api/sites/11111111-1111-1111-1111-111111111111?site_state=true'
        headers:
            Host: 'onebox'
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/2.3.1-dev (php_version=7.3.13&script=bin/terminus)'
            Authorization: 'Bearer 11111111-1111-1111-1111-111111111111:258cfc44-4220-11ea-8505-42010a800058:vcTqM66ulQGihuEOSbaQ0'
            Accept: null
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Date: 'Tue, 28 Jan 2020 22:47:23 GMT'
            Content-Type: application/json
            Content-Length: '4313'
            Connection: keep-alive
            X-Pantheon-Trace-Id: 26427e20-4220-11ea-b5b6-2d8f925fc9ff
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
            Strict-Transport-Security: max-age=31536000
        body: '{"created": 1580251289, "created_by_user_id": "11111111-1111-1111-1111-111111111111", "domain_lookup_rax": 1580251609, "framework": "wordpress", "holder_id": "11111111-1111-1111-1111-111111111111", "holder_type": "user", "last_code_push": {"timestamp": "2020-01-28T22:42:05", "user_uuid": null}, "name": "behat-tests", "owner": "11111111-1111-1111-1111-111111111111", "php_version": "55", "plan_name": "Sandbox", "preferred_availability_zone": "us-central1-f", "preferred_zone": "us-central1", "service_level": "free", "upstream": {"repository_branch": "master", "machine_name": "wordpress", "product_id": "e8fe8550-1ab9-4964-8838-2b9abdccf4bf", "url": "https://github.com/pantheon-systems/WordPress", "label": "WordPress", "organization_id": "", "framework": "wordpress", "branch": "master", "repository_url": "https://github.com/pantheon-systems/WordPress", "type": "core", "id": "e8fe8550-1ab9-4964-8838-2b9abdccf4bf"}, "label": "Behat Tests", "id": "11111111-1111-1111-1111-111111111111", "preferred_zone_label": "United States", "holder": {"profile": {"utm_term": "", "tracking_first_organization_invite": 1479332608, "invites_to_nonuser": 4, "seen_first_time_user_popover": true, "utm_content": "/", "experiments": {"welcome_video": "shown"}, "full_name": "Sara McCutcheon", "pullFromLive": true, "invites_to_user": 10, "web_services_business": null, "initial_identity_strategy": null, "utm_campaign": "pantheon.io (organic)", "invites_sent": 14, "verify": "037eadb020d51ccddba9e06a64908c98", "tracking_first_code_push": 1428811227, "google_adwords_account_registered_sent": 1428707350, "google_adwords_pushed_code_sent": 1428811242, "registration_context": null, "utm_medium": "", "job_function": "developer", "tracking_first_workflow_in_live": 1428811293, "tracking_first_team_invite": 1436464837, "firstname": "Sara", "invites_to_site": 13, "lastname": "McCutcheon", "pda_campaign": null, "utm_source": "https://www.bing.com/search?setmkt=en-US&q=pantheon+san+francisco", "phone": "4155555555", "last-org-spinup": "none", "tracking_first_site_create": 1428723370, "initial_identity_name": null, "created_organization_name": "Agency Name", "guilty_of_abuse": null, "invites_to_org": 1, "tracking_first_site_upgrade": 1437784612, "seens": {"new-plans": true, "global-cdn": true, "partner-program": true, "terminus-1": true}, "google_adwords_paid_for_site_sent": 1438018300, "modified": 1560893446, "utm_device": "", "maxdevsites": 12, "lead_type": "", "organization": " Pantheon Systems, Inc"}, "id": "11111111-1111-1111-1111-111111111111", "email": "devuser@pantheon.io"}, "settings": {"allow_domains": false, "preferred_availability_zone": "us-central1-f", "site_id": "11111111-1111-1111-1111-111111111111", "stunnel": false, "min_backups": 0, "owner": "11111111-1111-1111-1111-111111111111", "secure_runtime_access": false, "pingdom": 0, "allow_indexserver": false, "created_by_user_id": "11111111-1111-1111-1111-111111111111", "failover_appserver": 0, "migration_started_at": null, "cacheserver": 1, "on_server_development": false, "drush_version": 5, "migration_method": null, "current_num_domains": 0, "appserver": 1, "allow_read_slaves": false, "preferred_zone": "us-central1", "php_version": "55", "php_channel": "stable", "allow_cacheserver": false, "upstream": {"url": "https://github.com/pantheon-systems/WordPress", "product_id": "e8fe8550-1ab9-4964-8838-2b9abdccf4bf", "branch": "master"}, "ssl_enabled": null, "plan_name": "Sandbox", "fileserver": 1, "service_level": "free", "dedicated_ip": null, "dbserver": 1, "migration_origin_url": null, "domain_lookup_rax": 1580251609, "framework": "wordpress", "max_total_domains": 0, "key": "11111111-1111-1111-1111-111111111111", "max_num_cdes": 10, "migration_completed_at": null, "guilty_of_abuse": null, "indexserver": 1, "pingdom_chance": 0, "preferred_pool": null, "holder_id": "11111111-1111-1111-1111-111111111111", "name": "behat-tests", "created": 1580251289, "max_backups": 0, "holder_type": "user", "replica_verification_strategy": "pt-heartbeat", "id": "11111111-1111-1111-1111-111111111111", "pingdom_manually_enabled": false, "last_code_push": {"timestamp": "2020-01-28T22:42:05", "user_uuid": null}}, "base_domain": null, "attributes": {"label": "Behat Tests", "m3_ui": true}, "add_ons": [{"id": "NewRelic", "label": "New Relic"}]}'
-
    request:
        method: POST
        url: 'https://onebox/api/sites/11111111-1111-1111-1111-111111111111/workflows'
        headers:
            Host: 'onebox'
            Expect: null
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/2.3.1-dev (php_version=7.3.13&script=bin/terminus)'
            Authorization: 'Bearer 11111111-1111-1111-1111-111111111111:258cfc44-4220-11ea-8505-42010a800058:vcTqM66ulQGihuEOSbaQ0'
            Accept: null
        body: '{"type":"disable_new_relic_for_site","params":{"converge":true}}'
    response:
        status:
            http_version: '1.1'
            code: '202'
            message: Accepted
        headers:
            Server: nginx
            Date: 'Tue, 28 Jan 2020 22:48:06 GMT'
            Content-Type: 'application/json; charset=utf-8'
            Transfer-Encoding: chunked
            Connection: keep-alive
            X-Pantheon-Trace-Id: 3ca31990-4220-11ea-9291-4526f2c1771d
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
        body: '{"params": {"converge": true}, "role": "owner", "site_id": "11111111-1111-1111-1111-111111111111", "started_at": 1580251681.312105, "task_ids": ["3cac2026-4220-11ea-908a-42010a800160", "3cae394c-4220-11ea-908a-42010a800160", "3d91545c-4220-11ea-908a-42010a800160", "3d9335ec-4220-11ea-908a-42010a800160", "3d9f68a8-4220-11ea-908a-42010a800160", "3da0cb30-4220-11ea-908a-42010a800160", "3e4eab7e-4220-11ea-908a-42010a800160", "3e5233c0-4220-11ea-908a-42010a800160", "3e5d85d6-4220-11ea-908a-42010a800160", "3e5e2770-4220-11ea-908a-42010a800160", "3f461a08-4220-11ea-908a-42010a800160", "3f4cdadc-4220-11ea-908a-42010a800160", "3f529710-4220-11ea-908a-42010a800160", "3f53c2d4-4220-11ea-908a-42010a800160", "3f55b8aa-4220-11ea-908a-42010a800160", "3f659734-4220-11ea-908a-42010a800160", "3f757596-4220-11ea-908a-42010a800160"], "trace_id": "3ca31990-4220-11ea-9291-4526f2c1771d", "type": "disable_new_relic_for_site", "user_id": "11111111-1111-1111-1111-111111111111", "waiting_for_task_id": "3d91545c-4220-11ea-908a-42010a800160", "id": "3ca86c92-4220-11ea-908a-42010a800160", "key": "1580248800", "environment_id": null, "keep_forever": false, "phase": "started", "queued_time": null, "run_time": null, "created_at": 1580251681.227893, "reason": "", "environment": null, "final_task_id": null, "result": null, "total_time": null, "active_description": "Disabling New Relic", "description": "Disable New Relic", "step": 3, "has_operation_log_output": false, "number_of_tasks": 17, "trace_log_url": "https://app.logz.io/#/dashboard/kibana?kibanaRoute=discover%3F_a%3D(query:(query_string:(analyze_wildcard:!t,query:%27trace_id:3ca31990-4220-11ea-9291-4526f2c1771d%27)))%26_g%3D(refreshInterval:(display:Off,pause:!f,value:0),time:(from:%272020-01-28T22:43:01.227893Z%27,mode:quick,to:%27now%27))", "user": {"user_id": "11111111-1111-1111-1111-111111111111", "auth0_user_id": "auth0|pn-11111111-1111-1111-1111-111111111111", "created_at": 1428707345, "destination_organization_id": null, "is_registered": true, "created_organization_id": null, "password": "SCRUBBED", "email": "devuser@pantheon.io"}, "user_email": "devuser@pantheon.io", "waiting_for_task": {"allow_concurrent": true, "environment": "test", "fn_name": "queue_jenkins_task", "initialized_at": 1580251686.171703, "params": {"host": "localhost", "task_type": "converge_hostname", "job_id": "3d91545c-4220-11ea-908a-42010a800160", "hostname_id": "test-behat-tests.pantheonsite.io"}, "site_id": "11111111-1111-1111-1111-111111111111", "trace_id": "3ca31990-4220-11ea-9291-4526f2c1771d", "workflow_id": "3ca86c92-4220-11ea-908a-42010a800160", "id": "3d91545c-4220-11ea-908a-42010a800160", "key": "1580248800", "responses": [], "queued_time": null, "host": "localhost", "result": null, "phase": "initialized", "created_at": 1580251682.754262, "run_time": null, "total_time": null, "reason": "", "error_details": "", "internal_reason": "", "trace_log_url": "https://app.logz.io/#/dashboard/kibana?kibanaRoute=discover%3F_a%3D(query:(query_string:(analyze_wildcard:!t,query:%27trace_id:3ca31990-4220-11ea-9291-4526f2c1771d%27)))%26_g%3D(refreshInterval:(display:Off,pause:!f,value:0),time:(from:%272020-01-28T22:43:02.754262Z%27,mode:quick,to:%27now%27))", "type": "converge_hostname", "build_url": null, "messages": {}}}'
-
    request:
        method: GET
        url: 'https://onebox/api/sites/11111111-1111-1111-1111-111111111111/workflows/3ca86c92-4220-11ea-908a-42010a800160'
        headers:
            Host: 'onebox'
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/2.3.1-dev (php_version=7.3.13&script=bin/terminus)'
            Authorization: 'Bearer 11111111-1111-1111-1111-111111111111:258cfc44-4220-11ea-8505-42010a800058:vcTqM66ulQGihuEOSbaQ0'
            Accept: null
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Date: 'Tue, 28 Jan 2020 22:48:06 GMT'
            Content-Type: 'application/json; charset=utf-8'
            Transfer-Encoding: chunked
            Connection: keep-alive
            X-Pantheon-Trace-Id: 3fd12800-4220-11ea-9114-b3a0d1957940
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
            Strict-Transport-Security: max-age=31536000
        body: '{"params": {"converge": true}, "role": "owner", "site_id": "11111111-1111-1111-1111-111111111111", "started_at": 1580251681.312105, "task_ids": ["3cac2026-4220-11ea-908a-42010a800160", "3cae394c-4220-11ea-908a-42010a800160", "3d91545c-4220-11ea-908a-42010a800160", "3d9335ec-4220-11ea-908a-42010a800160", "3d9f68a8-4220-11ea-908a-42010a800160", "3da0cb30-4220-11ea-908a-42010a800160", "3e4eab7e-4220-11ea-908a-42010a800160", "3e5233c0-4220-11ea-908a-42010a800160", "3e5d85d6-4220-11ea-908a-42010a800160", "3e5e2770-4220-11ea-908a-42010a800160", "3f461a08-4220-11ea-908a-42010a800160", "3f4cdadc-4220-11ea-908a-42010a800160", "3f529710-4220-11ea-908a-42010a800160", "3f53c2d4-4220-11ea-908a-42010a800160", "3f55b8aa-4220-11ea-908a-42010a800160", "3f659734-4220-11ea-908a-42010a800160", "3f757596-4220-11ea-908a-42010a800160"], "trace_id": "3ca31990-4220-11ea-9291-4526f2c1771d", "type": "disable_new_relic_for_site", "user_id": "11111111-1111-1111-1111-111111111111", "waiting_for_task_id": "3d91545c-4220-11ea-908a-42010a800160", "id": "3ca86c92-4220-11ea-908a-42010a800160", "key": "11111111-1111-1111-1111-111111111111", "environment_id": null, "keep_forever": false, "phase": "started", "queued_time": null, "run_time": null, "created_at": 1580251681.227893, "reason": "", "environment": null, "final_task_id": null, "result": "succeeded", "total_time": null, "active_description": "Disabling New Relic", "description": "Disable New Relic", "step": 3, "has_operation_log_output": false, "number_of_tasks": 17, "trace_log_url": "https://app.logz.io/#/dashboard/kibana?kibanaRoute=discover%3F_a%3D(query:(query_string:(analyze_wildcard:!t,query:%27trace_id:3ca31990-4220-11ea-9291-4526f2c1771d%27)))%26_g%3D(refreshInterval:(display:Off,pause:!f,value:0),time:(from:%272020-01-28T22:43:01.227893Z%27,mode:quick,to:%27now%27))", "user": {"user_id": "11111111-1111-1111-1111-111111111111", "auth0_user_id": "auth0|pn-11111111-1111-1111-1111-111111111111", "created_at": 1428707345, "destination_organization_id": null, "is_registered": true, "created_organization_id": null, "password": "SCRUBBED", "email": "devuser@pantheon.io"}, "user_email": "devuser@pantheon.io", "waiting_for_task": {"allow_concurrent": true, "environment": "test", "fn_name": "queue_jenkins_task", "initialized_at": 1580251686.171703, "params": {"host": "localhost", "task_type": "converge_hostname", "job_id": "3d91545c-4220-11ea-908a-42010a800160", "hostname_id": "test-behat-tests.pantheonsite.io"}, "site_id": "11111111-1111-1111-1111-111111111111", "trace_id": "3ca31990-4220-11ea-9291-4526f2c1771d", "workflow_id": "3ca86c92-4220-11ea-908a-42010a800160", "id": "3d91545c-4220-11ea-908a-42010a800160", "key": "1580248800", "responses": [], "queued_time": null, "host": "localhost", "result": "succeeded", "phase": "initialized", "created_at": 1580251682.754262, "run_time": null, "total_time": null, "reason": "", "error_details": "", "internal_reason": "", "trace_log_url": "https://app.logz.io/#/dashboard/kibana?kibanaRoute=discover%3F_a%3D(query:(query_string:(analyze_wildcard:!t,query:%27trace_id:3ca31990-4220-11ea-9291-4526f2c1771d%27)))%26_g%3D(refreshInterval:(display:Off,pause:!f,value:0),time:(from:%272020-01-28T22:43:02.754262Z%27,mode:quick,to:%27now%27))", "type": "converge_hostname", "build_url": null, "messages": {}}}'
