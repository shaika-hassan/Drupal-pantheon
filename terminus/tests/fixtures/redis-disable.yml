
-
    request:
        method: POST
        url: 'https://onebox/api/authorize/machine-token'
        headers:
            Host: 'onebox'
            Expect: null
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/2.3.1-dev (php_version=7.3.13&script=bin/terminus)'
            Accept: null
        body: '{"machine_token":"111111111111111111111111111111111111111111111","client":"terminus"}'
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Date: 'Tue, 28 Jan 2020 23:02:10 GMT'
            Content-Type: 'application/json; charset=utf-8'
            Content-Length: '182'
            Connection: keep-alive
            X-Pantheon-Trace-Id: 36d918a0-4222-11ea-9291-4526f2c1771d
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
            Strict-Transport-Security: max-age=31536000
        body: '{"session":"11111111-1111-1111-1111-111111111111:37136640-4222-11ea-bdd3-42010a800117:qb72OWE0mdSuUrzCrh4Sd","expires_at":1582671730,"user_id":"11111111-1111-1111-1111-111111111111"}'
-
    request:
        method: GET
        url: 'https://onebox/api/site-names/behat-tests'
        headers:
            Host: 'onebox'
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/2.3.1-dev (php_version=7.3.13&script=bin/terminus)'
            Authorization: 'Bearer 11111111-1111-1111-1111-111111111111:37136640-4222-11ea-bdd3-42010a800117:qb72OWE0mdSuUrzCrh4Sd'
            Accept: null
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Date: 'Tue, 28 Jan 2020 23:02:12 GMT'
            Content-Type: 'application/json; charset=utf-8'
            Transfer-Encoding: chunked
            Connection: keep-alive
            X-Pantheon-Trace-Id: 37964e20-4222-11ea-b05a-056e6551f7d0
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
            Strict-Transport-Security: max-age=31536000
        body: '{"id": "11111111-1111-1111-1111-111111111111", "name": "behat-tests"}'
-
    request:
        method: GET
        url: 'https://onebox/api/sites/11111111-1111-1111-1111-111111111111?site_state=true'
        headers:
            Host: 'onebox'
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/2.3.1-dev (php_version=7.3.13&script=bin/terminus)'
            Authorization: 'Bearer 11111111-1111-1111-1111-111111111111:37136640-4222-11ea-bdd3-42010a800117:qb72OWE0mdSuUrzCrh4Sd'
            Accept: null
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Date: 'Tue, 28 Jan 2020 23:02:12 GMT'
            Content-Type: application/json
            Content-Length: '4299'
            Connection: keep-alive
            X-Pantheon-Trace-Id: 37f02df0-4222-11ea-9291-4526f2c1771d
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
            Strict-Transport-Security: max-age=31536000
        body: '{"allow_cacheserver": true, "created": 1580251289, "created_by_user_id": "11111111-1111-1111-1111-111111111111", "domain_lookup_rax": 1580252503, "framework": "wordpress", "holder_id": "11111111-1111-1111-1111-111111111111", "holder_type": "user", "last_code_push": {"timestamp": "2020-01-28T22:42:05", "user_uuid": null}, "name": "behat-tests", "owner": "11111111-1111-1111-1111-111111111111", "php_version": "55", "plan_name": "Sandbox", "preferred_availability_zone": "us-central1-f", "preferred_zone": "us-central1", "service_level": "free", "upstream": {"repository_branch": "master", "machine_name": "wordpress", "product_id": "e8fe8550-1ab9-4964-8838-2b9abdccf4bf", "url": "https://github.com/pantheon-systems/WordPress", "label": "WordPress", "organization_id": "", "framework": "wordpress", "branch": "master", "repository_url": "https://github.com/pantheon-systems/WordPress", "type": "core", "id": "e8fe8550-1ab9-4964-8838-2b9abdccf4bf"}, "label": "Behat Tests", "id": "11111111-1111-1111-1111-111111111111", "preferred_zone_label": "United States", "holder": {"profile": {"utm_term": "", "tracking_first_organization_invite": 1479332608, "invites_to_nonuser": 4, "seen_first_time_user_popover": true, "utm_content": "/", "experiments": {"welcome_video": "shown"}, "full_name": "Sara McCutcheon", "pullFromLive": true, "invites_to_user": 10, "web_services_business": null, "initial_identity_strategy": null, "utm_campaign": "pantheon.io (organic)", "invites_sent": 14, "verify": "037eadb020d51ccddba9e06a64908c98", "tracking_first_code_push": 1428811227, "google_adwords_account_registered_sent": 1428707350, "google_adwords_pushed_code_sent": 1428811242, "registration_context": null, "utm_medium": "", "job_function": "developer", "tracking_first_workflow_in_live": 1428811293, "tracking_first_team_invite": 1436464837, "firstname": "Sara", "invites_to_site": 13, "lastname": "McCutcheon", "pda_campaign": null, "utm_source": "https://www.bing.com/search?setmkt=en-US&q=pantheon+san+francisco", "phone": "4155555555", "last-org-spinup": "none", "tracking_first_site_create": 1428723370, "initial_identity_name": null, "created_organization_name": "Agency Name", "guilty_of_abuse": null, "invites_to_org": 1, "tracking_first_site_upgrade": 1437784612, "seens": {"new-plans": true, "global-cdn": true, "partner-program": true, "terminus-1": true}, "google_adwords_paid_for_site_sent": 1438018300, "modified": 1560893446, "utm_device": "", "maxdevsites": 12, "lead_type": "", "organization": " Pantheon Systems, Inc"}, "id": "11111111-1111-1111-1111-111111111111", "email": "devuser@pantheon.io"}, "settings": {"allow_domains": false, "preferred_availability_zone": "us-central1-f", "site_id": "11111111-1111-1111-1111-111111111111", "stunnel": false, "min_backups": 0, "owner": "11111111-1111-1111-1111-111111111111", "secure_runtime_access": false, "pingdom": 0, "allow_indexserver": false, "created_by_user_id": "11111111-1111-1111-1111-111111111111", "failover_appserver": 0, "migration_started_at": null, "cacheserver": 1, "on_server_development": false, "drush_version": 5, "migration_method": null, "current_num_domains": 0, "appserver": 1, "allow_read_slaves": false, "preferred_zone": "us-central1", "php_version": "55", "php_channel": "stable", "allow_cacheserver": true, "upstream": {"url": "https://github.com/pantheon-systems/WordPress", "product_id": "e8fe8550-1ab9-4964-8838-2b9abdccf4bf", "branch": "master"}, "ssl_enabled": null, "plan_name": "Sandbox", "fileserver": 1, "service_level": "free", "dedicated_ip": null, "dbserver": 1, "migration_origin_url": null, "domain_lookup_rax": 1580252503, "framework": "wordpress", "max_total_domains": 0, "key": "11111111-1111-1111-1111-111111111111", "max_num_cdes": 10, "migration_completed_at": null, "guilty_of_abuse": null, "indexserver": 1, "pingdom_chance": 0, "preferred_pool": null, "holder_id": "11111111-1111-1111-1111-111111111111", "name": "behat-tests", "created": 1580251289, "max_backups": 0, "holder_type": "user", "replica_verification_strategy": "pt-heartbeat", "id": "11111111-1111-1111-1111-111111111111", "pingdom_manually_enabled": false, "last_code_push": {"timestamp": "2020-01-28T22:42:05", "user_uuid": null}}, "base_domain": null, "attributes": {"label": "Behat Tests", "m3_ui": true}, "add_ons": []}'
-
    request:
        method: POST
        url: 'https://onebox/api/sites/11111111-1111-1111-1111-111111111111/workflows'
        headers:
            Host: 'onebox'
            Expect: null
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/2.3.1-dev (php_version=7.3.13&script=bin/terminus)'
            Authorization: 'Bearer 11111111-1111-1111-1111-111111111111:37136640-4222-11ea-bdd3-42010a800117:qb72OWE0mdSuUrzCrh4Sd'
            Accept: null
        body: '{"type":"disable_addon","params":{"addon":"cacheserver"}}'
    response:
        status:
            http_version: '1.1'
            code: '202'
            message: Accepted
        headers:
            Server: nginx
            Date: 'Tue, 28 Jan 2020 23:02:41 GMT'
            Content-Type: 'application/json; charset=utf-8'
            Transfer-Encoding: chunked
            Connection: keep-alive
            X-Pantheon-Trace-Id: 48456490-4222-11ea-a46f-1ffa60855b30
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
        body: '{"params": {"addon": "cacheserver"}, "role": "owner", "site_id": "11111111-1111-1111-1111-111111111111", "started_at": 1580252559.789183, "task_ids": ["484b775e-4222-11ea-a1d4-42010a8001a4", "484ceaf8-4222-11ea-a1d4-42010a8001a4", "48c0885a-4222-11ea-a1d4-42010a8001a4", "48c204aa-4222-11ea-a1d4-42010a8001a4", "48c4a098-4222-11ea-a1d4-42010a8001a4", "48c519b0-4222-11ea-a1d4-42010a8001a4", "48c593ae-4222-11ea-a1d4-42010a8001a4", "490f1024-4222-11ea-a1d4-42010a8001a4", "491070f4-4222-11ea-a1d4-42010a8001a4", "49138244-4222-11ea-a1d4-42010a8001a4", "49142852-4222-11ea-a1d4-42010a8001a4", "4914a390-4222-11ea-a1d4-42010a8001a4", "494b9530-4222-11ea-a1d4-42010a8001a4", "494cd1c0-4222-11ea-a1d4-42010a8001a4", "494fd4e2-4222-11ea-a1d4-42010a8001a4", "49508586-4222-11ea-a1d4-42010a8001a4", "4950ef58-4222-11ea-a1d4-42010a8001a4", "4951afe2-4222-11ea-a1d4-42010a8001a4", "49581a26-4222-11ea-a1d4-42010a8001a4", "49597bc8-4222-11ea-a1d4-42010a8001a4"], "trace_id": "48456490-4222-11ea-a46f-1ffa60855b30", "type": "disable_addon", "user_id": "11111111-1111-1111-1111-111111111111", "waiting_for_task_id": "48c0885a-4222-11ea-a1d4-42010a8001a4", "id": "484a6ddc-4222-11ea-a1d4-42010a8001a4", "key": "1580252400", "environment_id": null, "keep_forever": false, "phase": "started", "queued_time": null, "run_time": null, "created_at": 1580252559.738006, "reason": "", "environment": null, "final_task_id": null, "result": null, "total_time": null, "active_description": "Disabling cacheserver for site", "description": "Disable addon for site", "step": 3, "has_operation_log_output": false, "number_of_tasks": 20, "trace_log_url": "https://app.logz.io/#/dashboard/kibana?kibanaRoute=discover%3F_a%3D(query:(query_string:(analyze_wildcard:!t,query:%27trace_id:48456490-4222-11ea-a46f-1ffa60855b30%27)))%26_g%3D(refreshInterval:(display:Off,pause:!f,value:0),time:(from:%272020-01-28T22:57:39.738006Z%27,mode:quick,to:%27now%27))", "user": {"user_id": "11111111-1111-1111-1111-111111111111", "auth0_user_id": "auth0|pn-11111111-1111-1111-1111-111111111111", "created_at": 1428707345, "destination_organization_id": null, "is_registered": true, "created_organization_id": null, "password": "SCRUBBED", "email": "devuser@pantheon.io"}, "user_email": "devuser@pantheon.io", "waiting_for_task": {"allow_concurrent": true, "environment": "test", "fn_name": "queue_jenkins_task", "initialized_at": 1580252561.596806, "params": {"host": "localhost", "task_type": "converge_hostname", "job_id": "48c0885a-4222-11ea-a1d4-42010a8001a4", "hostname_id": "test-behat-tests.pantheonsite.io"}, "site_id": "11111111-1111-1111-1111-111111111111", "trace_id": "48456490-4222-11ea-a46f-1ffa60855b30", "workflow_id": "484a6ddc-4222-11ea-a1d4-42010a8001a4", "id": "48c0885a-4222-11ea-a1d4-42010a8001a4", "key": "1580252400", "responses": [], "queued_time": null, "host": "localhost", "result": null, "phase": "initialized", "created_at": 1580252560.512009, "run_time": null, "total_time": null, "reason": "", "error_details": "", "internal_reason": "", "trace_log_url": "https://app.logz.io/#/dashboard/kibana?kibanaRoute=discover%3F_a%3D(query:(query_string:(analyze_wildcard:!t,query:%27trace_id:48456490-4222-11ea-a46f-1ffa60855b30%27)))%26_g%3D(refreshInterval:(display:Off,pause:!f,value:0),time:(from:%272020-01-28T22:57:40.512009Z%27,mode:quick,to:%27now%27))", "type": "converge_hostname", "build_url": null, "messages": {}}}'
-
    request:
        method: GET
        url: 'https://onebox/api/sites/11111111-1111-1111-1111-111111111111/workflows/484a6ddc-4222-11ea-a1d4-42010a8001a4'
        headers:
            Host: 'onebox'
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/2.3.1-dev (php_version=7.3.13&script=bin/terminus)'
            Authorization: 'Bearer 11111111-1111-1111-1111-111111111111:37136640-4222-11ea-bdd3-42010a800117:qb72OWE0mdSuUrzCrh4Sd'
            Accept: null
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Date: 'Tue, 28 Jan 2020 23:02:41 GMT'
            Content-Type: 'application/json; charset=utf-8'
            Transfer-Encoding: chunked
            Connection: keep-alive
            X-Pantheon-Trace-Id: 498e3840-4222-11ea-9114-b3a0d1957940
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
            Strict-Transport-Security: max-age=31536000
        body: '{"params": {"addon": "cacheserver"}, "role": "owner", "site_id": "11111111-1111-1111-1111-111111111111", "started_at": 1580252559.789183, "task_ids": ["484b775e-4222-11ea-a1d4-42010a8001a4", "484ceaf8-4222-11ea-a1d4-42010a8001a4", "48c0885a-4222-11ea-a1d4-42010a8001a4", "48c204aa-4222-11ea-a1d4-42010a8001a4", "48c4a098-4222-11ea-a1d4-42010a8001a4", "48c519b0-4222-11ea-a1d4-42010a8001a4", "48c593ae-4222-11ea-a1d4-42010a8001a4", "490f1024-4222-11ea-a1d4-42010a8001a4", "491070f4-4222-11ea-a1d4-42010a8001a4", "49138244-4222-11ea-a1d4-42010a8001a4", "49142852-4222-11ea-a1d4-42010a8001a4", "4914a390-4222-11ea-a1d4-42010a8001a4", "494b9530-4222-11ea-a1d4-42010a8001a4", "494cd1c0-4222-11ea-a1d4-42010a8001a4", "494fd4e2-4222-11ea-a1d4-42010a8001a4", "49508586-4222-11ea-a1d4-42010a8001a4", "4950ef58-4222-11ea-a1d4-42010a8001a4", "4951afe2-4222-11ea-a1d4-42010a8001a4", "49581a26-4222-11ea-a1d4-42010a8001a4", "49597bc8-4222-11ea-a1d4-42010a8001a4"], "trace_id": "48456490-4222-11ea-a46f-1ffa60855b30", "type": "disable_addon", "user_id": "11111111-1111-1111-1111-111111111111", "waiting_for_task_id": "48c0885a-4222-11ea-a1d4-42010a8001a4", "id": "484a6ddc-4222-11ea-a1d4-42010a8001a4", "key": "11111111-1111-1111-1111-111111111111", "environment_id": null, "keep_forever": false, "phase": "started", "queued_time": null, "run_time": null, "created_at": 1580252559.738006, "reason": "", "environment": null, "final_task_id": null, "result": "succeeded", "total_time": null, "active_description": "Disabling cacheserver for site", "description": "Disable addon for site", "step": 3, "has_operation_log_output": false, "number_of_tasks": 20, "trace_log_url": "https://app.logz.io/#/dashboard/kibana?kibanaRoute=discover%3F_a%3D(query:(query_string:(analyze_wildcard:!t,query:%27trace_id:48456490-4222-11ea-a46f-1ffa60855b30%27)))%26_g%3D(refreshInterval:(display:Off,pause:!f,value:0),time:(from:%272020-01-28T22:57:39.738006Z%27,mode:quick,to:%27now%27))", "user": {"user_id": "11111111-1111-1111-1111-111111111111", "auth0_user_id": "auth0|pn-11111111-1111-1111-1111-111111111111", "created_at": 1428707345, "destination_organization_id": null, "is_registered": true, "created_organization_id": null, "password": "SCRUBBED", "email": "devuser@pantheon.io"}, "user_email": "devuser@pantheon.io", "waiting_for_task": {"allow_concurrent": true, "build": {"url": "job/converge_hostname/310898/", "number": 310898, "phase": "STARTED", "estimated_duration": 3842, "duration": 0, "full_url": "https://104.197.168.13:8090/jenkins/job/converge_hostname/310898/"}, "environment": "test", "fn_name": "queue_jenkins_task", "initialized_at": 1580252561.596806, "params": {"host": "localhost", "task_type": "converge_hostname", "job_id": "48c0885a-4222-11ea-a1d4-42010a8001a4", "hostname_id": "test-behat-tests.pantheonsite.io"}, "queued_at": 1580252561.60247, "responses": [{"code": 201, "body": "Successfully queued converge_hostname", "error_details": "", "internal_reason": ""}], "site_id": "11111111-1111-1111-1111-111111111111", "started_at": 1580252561.738167, "trace_id": "48456490-4222-11ea-a46f-1ffa60855b30", "workflow_id": "484a6ddc-4222-11ea-a1d4-42010a8001a4", "id": "48c0885a-4222-11ea-a1d4-42010a8001a4", "key": "1580252400", "queued_time": 0.1356971263885498, "host": "localhost", "result": "succeeded", "phase": "started", "created_at": 1580252560.512009, "run_time": null, "total_time": null, "reason": "", "error_details": "", "internal_reason": "", "trace_log_url": "https://app.logz.io/#/dashboard/kibana?kibanaRoute=discover%3F_a%3D(query:(query_string:(analyze_wildcard:!t,query:%27trace_id:48456490-4222-11ea-a46f-1ffa60855b30%27)))%26_g%3D(refreshInterval:(display:Off,pause:!f,value:0),time:(from:%272020-01-28T22:57:40.512009Z%27,mode:quick,to:%27now%27))", "type": "converge_hostname", "build_url": "https://104.197.168.13:8090/jenkins/job/converge_hostname/310898/", "messages": {"2020-01-28T23:02:41.979128": {"message": "Successfully queued converge_hostname", "level": "INFO"}}}}'
